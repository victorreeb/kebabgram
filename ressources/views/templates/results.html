{% extends 'app.html' %}
  {% block content %}
    <h2 class="text-center">Résultats par KebabSearch pour le mot-clé <strong>{{query}}</strong></h2>
    <hr>


    {% if by_user != null %}
      <div class="row">
        <div class="col-md-12">
          <h3 class="text-center">Résultats pour les utilisateurs</h3>
          {% if results.users.count > 0 %}
            {% for user in results.users %}
            <p><a href=" {{path_for('images.user.index', {'name' : user.name}) }} ">{{user.name}}</a> - {{user.nb_photos}} {{user.nb_photos > 1 ? ' photos' : ' photo'}}</p>
            {% endfor %}
          {% else %}
            <p class="text-center">Aucune correspondance</p>
          {% endif %}
        </div>
      </div>
      <hr>
    {% endif %}


    {% if by_name != null %}
      <div class="row">
        <div class="col-md-12">
          <h3 class="text-center">Résultats pour les photos par nom</h3>
          {% if results.photos_by_name.count > 0  %}
            {% set image_row = 1 %}
            {% for image in results.photos_by_name %}

              {% if image_row == 1 %}
                <div class="row">
              {% endif %}

              <div class="col-md-4">
                <label for="{{ image.name }}" class="italic"><h4><em>{{ image.name }}</em></h4></label>
                <a href="{{ path_for('images.user.show', {'name' : image.user, 'id' : image.id}) }}" id="{{ image.name }}">
                  <img class="img-responsive" src="{{ image.link }}">
                </a>
              </div>

              {% if image_row == 3 %}
                </div>
                <br>
                {% set image_row = 1 %}
              {% else %}
                {% set image_row = image_row + 1 %}
              {% endif %}

            {% endfor %}
            {% if image_row == 3 or image_row == 2 %}
              </div>
              <br>
            {% endif %}
          {% else %}
          <p class="text-center">Aucune correspondance</p>
          {% endif %}
        </div>
      </div>
      <hr>
    {% endif %}


    {% if by_tag != null %}
      <div class="row">
        <div class="col-md-12">
          <h3 class="text-center">Résultats pour les photos par tag</h3>
          {% if results.photos_by_tag.count > 0  %}
            {% set image_row = 1 %}
            {% for image in results.photos_by_tag %}

              {% if image_row == 1 %}
                <div class="row">
              {% endif %}

              <div class="col-md-4">
                <label for="{{ image.name }}" class="italic"><h4><em>{{ image.name }}</em></h4></label>
                <a href="{{ path_for('images.user.show', {'name' : image.user, 'id' : image.id}) }}" id="{{ image.name }}">
                  <img class="img-responsive" src="{{ image.link }}">
                </a>
              </div>

              {% if image_row == 3 %}
                </div>
                <br>
                {% set image_row = 1 %}
              {% else %}
                {% set image_row = image_row + 1 %}
              {% endif %}

            {% endfor %}
            {% if image_row == 3 or image_row == 2 %}
              </div>
              <br>
            {% endif %}
          {% else %}
          <p class="text-center">Aucune correspondance</p>
          {% endif %}
        </div>
      </div>
      <hr>
    {% endif %}


    {% if by_place != null %}
      <div class="row">
        <div class="col-md-12">
          <h3 class="text-center">Résultats pour les photos par lieu</h3>
          {% if results.photos_by_place.count > 0  %}
            {% set image_row = 1 %}
            {% for image in results.photos_by_place %}

              {% if image_row == 1 %}
                <div class="row">
              {% endif %}

              <div class="col-md-4">
                <label for="{{ image.name }}" class="italic"><h4><em>{{ image.name }}</em></h4></label>
                <a href="{{ path_for('images.user.show', {'name' : image.user, 'id' : image.id}) }}" id="{{ image.name }}">
                  <img class="img-responsive" src="{{ image.link }}">
                </a>
              </div>

              {% if image_row == 3 %}
                </div>
                <br>
                {% set image_row = 1 %}
              {% else %}
                {% set image_row = image_row + 1 %}
              {% endif %}

            {% endfor %}
            {% if image_row == 3 or image_row == 2 %}
              </div>
              <br>
            {% endif %}
          {% else %}
          <p class="text-center">Aucune correspondance</p>
          {% endif %}
        </div>
      </div>
      <hr>
    {% endif %}

  {% endblock %}
